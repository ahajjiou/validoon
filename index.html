<!-- index.html -->
<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="referrer" content="no-referrer" />
  <meta name="description" content="Validoon — Local decision engine to triage inputs, detect risks, and decide ALLOW / WARN / BLOCK (client-side)." />

  <!-- Lightweight CSP (static site friendly) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 script-src 'self';
                 style-src 'self' 'unsafe-inline';
                 img-src 'self' data:;
                 connect-src 'self';
                 base-uri 'none';
                 form-action 'none'">

  <title>Validoon</title>

  <style>
    :root{
      --bg:#020617; --panel:#0f172a; --muted:#64748b; --text:#f8fafc;
      --line:#1e293b; --ok:#10b981; --warn:#fbbf24; --bad:#f43f5e; --info:#0ea5e9;
      --accent:#8b5cf6; --shadow:0 25px 50px -12px rgba(0,0,0,.55);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; font-family:system-ui,-apple-system,'Segoe UI',sans-serif;
      background:var(--bg); color:var(--text); line-height:1.55;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    .container{ max-width:1200px; margin:0 auto; padding:28px 16px; }
    .glass{
      background:rgba(15,23,42,.94); border:1px solid var(--line); border-radius:20px;
      padding:22px; backdrop-filter:blur(10px); box-shadow:var(--shadow);
    }
    .header{ display:flex; justify-content:space-between; align-items:flex-start; gap:12px; flex-wrap:wrap; margin-bottom:16px; }
    h1{ margin:0; font-size:28px; letter-spacing:-.6px; }
    .subtitle{ margin:6px 0 0; color:var(--muted); font-size:13px; max-width:820px; }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 12px; border-radius:999px;
      border:1px solid rgba(139,92,246,.35); background:rgba(139,92,246,.10);
      color:#d9d6ff; font-weight:900; font-size:12px; letter-spacing:.4px; white-space:nowrap;
    }
    .hero{
      display:grid; grid-template-columns:1.2fr .8fr; gap:16px; margin-bottom:16px;
    }
    @media (max-width:980px){ .hero{ grid-template-columns:1fr; } }

    .blurb{
      border:1px solid var(--line); border-radius:16px; padding:16px;
      background:rgba(255,255,255,.02);
    }
    .blurb h2{ margin:0 0 8px; font-size:16px; letter-spacing:-.2px; }
    .blurb p{ margin:0; color:var(--muted); font-size:13px; }
    .blurb ul{ margin:10px 0 0; padding-left:18px; color:var(--muted); font-size:13px; }
    .blurb li{ margin:6px 0; }

    .workspace{ display:grid; grid-template-columns:1.35fr .65fr; gap:16px; }
    @media (max-width:980px){ .workspace{ grid-template-columns:1fr; } }

    textarea{
      width:100%; min-height:320px;
      background:#010409; border:2px solid var(--line); border-radius:16px;
      color:#e2e8f0; padding:14px; font-family:ui-monospace,Consolas,Monaco,monospace;
      font-size:13.5px; outline:none; resize:vertical;
    }
    textarea:focus{ border-color:var(--accent); box-shadow:0 0 0 4px rgba(139,92,246,.12); }
    .btn-row{ display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    .btn{
      padding:11px 14px; border-radius:12px; border:1px solid transparent;
      font-weight:900; cursor:pointer; display:inline-flex; align-items:center; justify-content:center; gap:8px;
      font-size:13px; background:transparent; color:#fff;
      transition:transform .16s ease, background-color .16s ease, border-color .16s ease, box-shadow .16s ease, filter .16s ease;
    }
    .btn-main{ background:var(--accent); color:#fff; }
    .btn-main:hover{ transform:translateY(-1px); filter:brightness(1.08); box-shadow:0 10px 26px rgba(139,92,246,.22); }
    .btn-sec{ border-color:var(--line); background:rgba(15,23,42,.35); }
    .btn-sec:hover{ transform:translateY(-1px); border-color:#334155; background:rgba(255,255,255,.03); }
    .btn-clear{ margin-left:auto; }

    .rightBox{ display:flex; flex-direction:column; gap:12px; }
    .kpiGrid{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
    .kpi{
      background:#111b2f; border:1px solid var(--line); border-radius:16px; padding:14px;
      border-bottom:4px solid var(--accent);
    }
    .label{ display:block; font-size:11px; color:var(--muted); letter-spacing:1.1px; text-transform:uppercase; margin-bottom:4px; }
    .value{ font-size:24px; font-weight:1000; letter-spacing:-.6px; }

    .verdict{ font-size:44px; font-weight:1000; letter-spacing:-1.2px; margin-top:2px; }
    .divider{ height:1px; background:var(--line); margin:10px 0; }
    .chips{ display:flex; flex-wrap:wrap; gap:8px; }
    .chip{
      display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px;
      border:1px solid var(--line); background:#0b1530; color:var(--info);
      font-weight:900; font-size:11px; white-space:nowrap;
    }
    ul{ margin:8px 0 0; padding-left:18px; color:var(--muted); font-size:13px; }
    li{ margin:6px 0; }

    .tableWrap{ margin-top:16px; }
    table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:16px; }
    thead th{
      text-align:left; padding:12px; color:var(--muted); font-size:11px; letter-spacing:1px;
      text-transform:uppercase; border-bottom:2px solid var(--line); background:rgba(255,255,255,.03);
      position:sticky; top:0; z-index:1;
    }
    tbody td{
      padding:10px 12px; border-bottom:1px solid rgba(30,41,59,.9);
      vertical-align:top; font-size:13px; background:rgba(255,255,255,.015);
    }
    tbody tr:hover td{ background:rgba(255,255,255,.03); }
    .mono{ font-family:ui-monospace,Consolas,Monaco,monospace; color:#cbd5e1; word-break:break-all; }
    .tag{ display:inline-block; font-weight:1000; font-size:11px; padding:4px 9px; border-radius:8px; border:1px solid transparent; }
    .tag-allow{ color:var(--ok); background:rgba(16,185,129,.08); border-color:rgba(16,185,129,.22); }
    .tag-warn{ color:var(--warn); background:rgba(245,158,11,.08); border-color:rgba(245,158,11,.22); }
    .tag-block{ color:var(--bad); background:rgba(244,63,94,.08); border-color:rgba(244,63,94,.22); }

    .footNote{ margin-top:10px; color:var(--muted); font-size:12px; }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <div>
        <h1>Validoon</h1>
        <p class="subtitle">
          Fast, local triage for messy inputs. Paste one item per line and get a clear decision (ALLOW / WARN / BLOCK),
          with the exact signals and a simple next action — all processed in your browser.
        </p>
      </div>
      <div class="pill">Client-side • No uploads • Instant</div>
    </div>

    <div class="hero">
      <div class="blurb glass">
        <h2>What it does (in 10 seconds)</h2>
        <p>
          Validoon turns raw text, URLs, logs, and suspicious fragments into a practical verdict you can act on.
          It decodes common obfuscation, detects risk patterns, and explains “why” without noise.
        </p>
        <ul>
          <li><b>Decode</b> (Unicode normalization, URL decoding, safe Base64 heuristic)</li>
          <li><b>Detect</b> (SQLi, XSS, command injection, path traversal/LFI, risky URLs)</li>
          <li><b>Decide</b> (ALLOW / WARN / BLOCK with confidence + remediation)</li>
        </ul>
        <div class="footNote">Tip: Use Test A / Test B to confirm everything works end-to-end.</div>
      </div>

      <div class="glass blurb">
        <h2>On this page</h2>
        <ul>
          <li>Step 1: Paste inputs</li>
          <li>Step 2: Run scan (smart scoring)</li>
          <li>Step 3: Explain decision (reasons + actions)</li>
          <li>Step 4: Test suites A/B + Clear</li>
          <li>Step 5: Export JSON + local counters</li>
        </ul>
        <div class="divider"></div>
        <span class="label">Local counters</span>
        <div style="display:flex; gap:10px; flex-wrap:wrap; color:var(--muted); font-size:13px;">
          <div>Scans: <b id="kpiScans" style="color:var(--text)">0</b></div>
          <div>Lines: <b id="kpiLines" style="color:var(--text)">0</b></div>
          <div>Blocks: <b id="kpiBlocks" style="color:var(--text)">0</b></div>
        </div>
      </div>
    </div>

    <div class="workspace">
      <div class="glass">
        <span class="label">Input (one per line)</span>
        <textarea id="input" placeholder="Paste segments: URLs, logs, Base64, suspicious strings..."></textarea>

        <div class="btn-row">
          <button class="btn btn-main" id="btnRun" type="button">Execute Scan</button>
          <button class="btn btn-sec" id="btnTestA" type="button">Test A (Mixed)</button>
          <button class="btn btn-sec" id="btnTestB" type="button">Test B (Hard)</button>
          <button class="btn btn-sec" id="btnExport" type="button">Export JSON</button>
          <button class="btn btn-sec btn-clear" id="btnClear" type="button">Clear</button>
        </div>
      </div>

      <div class="glass rightBox">
        <div>
          <span class="label">System Verdict</span>
          <div id="verdict" class="verdict">---</div>
        </div>

        <div class="kpiGrid">
          <div class="kpi">
            <span class="label">Peak Severity</span>
            <span id="riskVal" class="value">0%</span>
          </div>
          <div class="kpi">
            <span class="label">Confidence</span>
            <span id="confVal" class="value">0%</span>
          </div>
        </div>

        <div class="divider"></div>
        <span class="label">Active Signals</span>
        <div id="signals" class="chips" aria-live="polite"></div>

        <div class="divider"></div>
        <span class="label">Primary Reasons</span>
        <ul id="reasons" aria-live="polite"></ul>

        <div class="divider"></div>
        <span class="label">Next Action</span>
        <ul id="actions" aria-live="polite"></ul>
      </div>
    </div>

    <div class="glass tableWrap">
      <table aria-label="Per-line Findings">
        <thead>
          <tr>
            <th style="width:44%;">Segment</th>
            <th>Type</th>
            <th>Decision</th>
            <th>Severity</th>
            <th>Confidence</th>
            <th>Entropy</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
      <div class="footNote">Export produces a JSON report for the current input (up to 2000 lines).</div>
    </div>

  </div>

  <script src="app.js" defer></script>
</body>
</html>
